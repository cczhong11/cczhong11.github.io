<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  
  <meta name="author"
        content=""/>

  
  <meta name="description" content="This blog will tell you how to solve NoSuchMethodError in Java SDK "/>
  

  

  
  <link rel="canonical" href="http://www.tczhong.com/posts/cc/azure-error/"/>

  

  <title>Solve NoSuchMethodError in Azure JAVA SDK  &middot; TC blog</title>

  <link rel="shortcut icon" href="http://www.tczhong.com/images/favicon.ico"/>
  <link rel="stylesheet" href="http://www.tczhong.com/css/animate.min.css"/>
  <link rel="stylesheet" href="http://www.tczhong.com/css/remixicon.css"/>
  <link rel="stylesheet" href="http://www.tczhong.com/css/zozo.css"/>
  <link rel="stylesheet" href="http://www.tczhong.com/css/highlight.css"/>

  
  
</head>

<body>
<div class="main animated">
  <div class="nav_container animated fadeInDown">
  <div class="site_nav" id="site_nav">
    <ul>
      
      <li>
        <a href="http://www.tczhong.com/posts/">Posts</a>
      </li>
      
      <li>
        <a href="http://www.tczhong.com/about/hello">About</a>
      </li>
      
      <li>
        <a href="http://www.tczhong.com/tianchen_zhong.pdf">My Resume</a>
      </li>
      
      <li>
        <a href="http://www.tczhong.com/posts/project/index.html">Project</a>
      </li>
      
    </ul>
  </div>
  <div class="menu_icon">
    <a id="menu_icon"><i class="remixicon-links-line"></i></a>
  </div>
</div>

  <div class="header animated fadeInDown">
  <div class="site_title_container">
    <div class="site_title">
      <h1>
        <a href="http://www.tczhong.com/">
          <span>TC blog</span>
          <img src="http://www.tczhong.com/img/kirby.png"/>
        </a>
      </h1>
    </div>
    <div class="description">
      <p class="sub_title"></p>
      <div class="my_socials">
        
        <a href="http://www.tczhong.com/index.xml" type="application/rss+xml" title="rss" target="_blank"><i class="remixicon-rss-fill"></i></a>
      </div>
    </div>
  </div>
</div>

  <div class="content">
    <div class="post_page">
      <div class="post animated fadeInDown">
        <div class="post_title post_detail_title">
          <h2><a href='http://www.tczhong.com/posts/cc/azure-error/'>Solve NoSuchMethodError in Azure JAVA SDK </a></h2>
          <span class="date">2018.07.05</span>
        </div>
        <div class="post_content markdown"><h1 id="problem">Problem</h1>
<p>I met a NoSuchMethodError in Azure Java SDK. The error message is like the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Exception in thread <span style="color:#e6db74">&#34;main&#34;</span> java<span style="color:#f92672">.</span><span style="color:#a6e22e">lang</span><span style="color:#f92672">.</span><span style="color:#a6e22e">NoSuchMethodError</span><span style="color:#f92672">:</span> com<span style="color:#f92672">.</span><span style="color:#a6e22e">microsoft</span><span style="color:#f92672">.</span><span style="color:#a6e22e">azure</span><span style="color:#f92672">.</span><span style="color:#a6e22e">credentials</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ApplicationTokenCredentials</span><span style="color:#f92672">.</span><span style="color:#a6e22e">proxy</span><span style="color:#f92672">()</span>Ljava<span style="color:#f92672">/</span>net<span style="color:#f92672">/</span>Proxy<span style="color:#f92672">;</span>
</code></pre></div><p>It was very strange and I searched on the <a href="https://stackoverflow.com/questions/41438600/java-lang-nosuchmethoderror-com-microsoft-azure-storage-core-storagecredentials?rq=1">stackoverflow</a>. And it shows the problem could be confliction in package version. Therefore I looked into the code to find the reason.</p>
<h1 id="solution">Solution</h1>
<p>In the beginning, I needed to go into the source code to see what happened there.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// https://github.com/Azure/autorest-clientruntime-for-java/blob/master/azure-client-authentication/src/main/java/com/microsoft/azure/credentials/ApplicationTokenCredentials.java
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> AuthenticationResult <span style="color:#a6e22e">acquireAccessToken</span><span style="color:#f92672">(</span>String resource<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        String authorityUrl <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">environment</span><span style="color:#f92672">().</span><span style="color:#a6e22e">activeDirectoryEndpoint</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">domain</span><span style="color:#f92672">();</span>
        ExecutorService executor <span style="color:#f92672">=</span> Executors<span style="color:#f92672">.</span><span style="color:#a6e22e">newSingleThreadExecutor</span><span style="color:#f92672">();</span>
        AuthenticationContext context <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AuthenticationContext<span style="color:#f92672">(</span>authorityUrl<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> executor<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>proxy<span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            context<span style="color:#f92672">.</span><span style="color:#a6e22e">setProxy</span><span style="color:#f92672">(</span>proxy<span style="color:#f92672">());</span>
        <span style="color:#f92672">}</span>
        <span style="color:#f92672">....</span>
</code></pre></div><p>So the problem is it could not find <code>proxy()</code>, where it is? I also could not find it in this file. I looked into the javadoc and it extends <code>AzureTokenCredentials</code>. Therefore I got into this file and saw the proxy methods.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//https://github.com/Azure/autorest-clientruntime-for-java/blob/master/azure-client-runtime/src/main/java/com/microsoft/azure/credentials/AzureTokenCredentials.java
</span><span style="color:#75715e"></span>	<span style="color:#75715e">/**
</span><span style="color:#75715e">     * @return the proxy being used for accessing Active Directory.
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> Proxy <span style="color:#a6e22e">proxy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> proxy<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></div><p>So why it could not find it? Maybe it is because package confliction. So I used <code>mvn dependency:tree</code> to check all the package version.</p>
<pre><code>
[INFO] +- junit:junit:jar:3.8.1:test
[INFO] +- com.microsoft.azure:azure-keyvault:jar:1.0.0:compile
[INFO] |  +- com.microsoft.azure:azure-client-runtime:jar:1.0.0:compile
[INFO] |  |  \- com.microsoft.rest:client-runtime:jar:1.0.0:compile
[INFO] |  |     +- com.squareup.retrofit2:retrofit:jar:2.1.0:compile
[INFO] |  |     +- com.squareup.okhttp3:okhttp:jar:3.3.1:compile
[INFO] |  |     |  \- com.squareup.okio:okio:jar:1.8.0:compile
[INFO] |  |     +- com.squareup.okhttp3:logging-interceptor:jar:3.3.1:compile
[INFO] |  |     +- com.squareup.okhttp3:okhttp-urlconnection:jar:3.3.1:compile
[INFO] |  |     +- com.squareup.retrofit2:converter-jackson:jar:2.1.0:compile
[INFO] |  |     +- com.fasterxml.jackson.datatype:jackson-datatype-joda:jar:2.7.2:compile
[INFO] |  |     \- com.squareup.retrofit2:adapter-rxjava:jar:2.1.0:compile
[INFO] |  \- com.microsoft.azure:azure-keyvault-webkey:jar:1.0.0:compile
[INFO] +- com.microsoft.azure:azure:jar:1.8.0:compile
[INFO] |  +- com.microsoft.azure:azure-client-authentication:jar:1.3.1:compile
[INFO] |  |  \- com.microsoft.azure:azure-annotations:jar:1.2.0:compile
[INFO] |  +- com.microsoft.azure:azure-mgmt-resources:jar:1.8.0:compile
[INFO] |  |  +- org.slf4j:slf4j-simple:jar:1.7.5:compile
[INFO] |  |  \- io.reactivex:rxjava:jar:1.2.4:compile
....
</code></pre><p>You could see in <code>azure-keyvault</code>, it used <code>azure-client-runtime:jar:1.0.0</code>, but in <code>azure-client-authentication:jar</code>, it is 1.3.1 version. The <code>azure-client-runtime</code> is too old and  that&rsquo;s why it could not find <code>proxy()</code>.</p>
<p>Therefore the solution is to upgrade the version of this <code>azure-keyvault</code> package. You could find more infomation in maven official <a href="https://mvnrepository.com/artifact/com.microsoft.azure">website</a>.</p>
<h2 id="general-solution">General Solution</h2>
<ol>
<li>Find the package contains that method or class</li>
<li>Use <code>mvn dependency:tree</code> to get all package information, find package version</li>
<li>Check dependency between package.</li>
</ol>
</div>
        <div class="post_footer">
          
        </div>
      </div>
      
      
    </div>
  </div>
  <a id="back_to_top" href="#" class="back_to_top"><span>△</span></a>
</div>
<footer class="footer">
  <div class="powered_by">
    <a href="https://zeuk.me">Designed by Zeuk,</a>
    <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
  </div>

  <div class="footer_slogan">
    <span></span>
  </div>
</footer>



<script src="http://www.tczhong.com/js/jquery-3.3.1.min.js"></script>
<script src="http://www.tczhong.com/js/zozo.js"></script>
<script src="http://www.tczhong.com/js/highlight.pack.js"></script>
<link  href="http://www.tczhong.com/css/fancybox.min.css" rel="stylesheet">
<script src="http://www.tczhong.com/js/fancybox.min.js"></script>

<script>hljs.initHighlightingOnLoad()</script>





<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tczhong" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</body>
</html>
